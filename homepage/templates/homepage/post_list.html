{% load static %}

{% for post in posts %}
<article class="blog-card" ...>
    <div style="margin-bottom: 20px; overflow: hidden;">
        
        <!-- Wir prÃ¼fen auf image_name, nicht image -->
        {% if post.image_name %}
            <!-- Hier bauen wir den Pfad manuell zusammen -->
            <img src="{% static 'homepage/img/' %}{{ post.image_name }}" 
                 alt="{{ post.headline }}" 
                 style="width: 100%; height: auto; display: block;">
        {% else %}
            <!-- Fallback -->
            <div style="width: 100%; height: 200px; background-color: #eee;"></div>
        {% endif %}

    <!-- Inhalt -->
    <div style="display: flex; flex-direction: column; gap: 10px;">
        <span style="font-family: sans-serif; font-size: 0.85rem; color: #888;">
            {{ post.date|date:"d. F Y" }}
        </span>
        
        <h3 style="font-size: 1.5rem; margin: 0; color: #222; line-height: 1.3;">
            {{ post.headline }}
        </h3>
        
        <p style="font-family: sans-serif; font-size: 1rem; color: #555; line-height: 1.6; margin-bottom: 10px;">
            {{ post.summary }}
        </p>
        
        <!-- Link-Logik: Externe URL oder interner Slug -->
        <div style="margin-top: auto;">
            <a href="{% if post.external_url %}{{ post.external_url }}{% else %}{% url 'homepage:blog_detail' post.slug %}{% endif %}" 
                style="font-family: sans-serif; text-decoration: none; color: #444; font-weight: bold;"
                {% if post.external_url %}target="_blank" rel="noopener noreferrer"{% endif %}>
                Read more
            </a>
        </div>
    </div>
</article>
{% endfor %}
