{% load static %}

{% for post in posts %}
<article class="blog-card" style="border: 1px solid #ddd; padding: 15px; border-radius: 5px; background: #fff;">
    <div style="margin-bottom: 20px; overflow: hidden;">
        {% if post.image_name %}
            <img src="{% static 'homepage/img/'|add:post.image_name %}" 
                 alt="{{ post.headline }}" 
                 style="width: 100%; height: auto; display: block;">
        {% else %}
            <div style="width: 100%; height: 200px; background-color: #eee;"></div>
        {% endif %}
    </div>

    <div style="display: flex; flex-direction: column; gap: 10px;">
        <span style="font-family: sans-serif; font-size: 0.85rem; color: #888;">
            {{ post.date|date:"d. F Y" }}
        </span>
        
        <h3 style="font-size: 1.5rem; margin: 0; color: #222; line-height: 1.3;">
            {{ post.headline }}
        </h3>
        
        <p style="font-family: sans-serif; font-size: 1rem; color: #555; line-height: 1.6; margin-bottom: 10px;">
            {{ post.summary }}
        </p>
        
        <div style="margin-top: auto;">
            {% if post.external_url %}
                <!-- Case 1: External URL -->
                <a href="{{ post.external_url }}" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   style="font-family: sans-serif; text-decoration: none; color: #444; font-weight: bold;">
                    Read more &rarr;
                </a>
            {% else %}
                <!-- Case 2: Internal Template based on Slug -->
                <!-- Assuming your urls.py has name='blog_detail' -->
                <a href="{% url 'homepage:blog_detail' post.slug %}" 
                   style="font-family: sans-serif; text-decoration: none; color: #444; font-weight: bold;">
                    Read more
                </a>
            {% endif %}
        </div>
    </div>
</article>
{% endfor %}
